{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport {IonicPage, NavController, NavParams, ToastController} from 'ionic-angular';\nimport { Facebook } from '@ionic-native/facebook';\nimport {HttpClient, HttpParams} from \"@angular/common/http\";\n\n/**\n * Generated class for the LoginPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n    selector: 'page-login',\n    templateUrl: 'login.html',\n})\nexport class LoginPage {\n    fbResponse: any = {};\n    user: any = {};\n    api_url = 'http://infoxsoft.com/app/';\n    operation: string = 'login';\n    constructor(public navCtrl: NavController, public navParams: NavParams, private fb: Facebook, public httpClient: HttpClient, private toastCtrl: ToastController) {\n    }\n    facebookLogin() {\n        this.fb.login(['public_profile', 'email'])\n            .then((res) => {\n                console.log('Logged into Facebook!', res);\n                this.fbResponse = res;\n                this.fb.api('me?fields=id,name,email,first_name,last_name,picture.width(720).height(720).as(picture_large)', []).then((fbData) => {\n                    const userObject:any = {\n                        nombre: fbData.first_name,\n                        apellidos: fbData.last_name,\n                        email: fbData.email,\n                        user_facebook_id: res.authResponse.userID,\n                        facebook_object: JSON.stringify(res),\n                        facebook_photo: fbData.picture_large.data.url\n                    };\n                    this.registerFromFacebook(userObject).subscribe( (user) => {\n                        alert('Ingresado con éxito');\n                        localStorage.setItem('infox_user', JSON.stringify(user));\n                    });\n                });\n            })\n            .catch(e => console.log('Error logging into Facebook', e));\n    }\n    registerFromFacebook(fbOject) {\n        const params = new HttpParams({\n            fromObject: fbOject\n        });\n        return this.httpClient.get(this.api_url+'registro_facebook.php',\n            {params: params});\n    }\n    emailLogin() {\n        const params = new HttpParams({\n            fromObject: this.user\n        });\n        this.httpClient.get(this.api_url+'login.php', {params: params}).subscribe((data: any) => {\n            if(data.error) {\n                alert(data.error);\n            }else{\n                localStorage.setItem('infox_user', JSON.stringify(data));\n                let toast = this.toastCtrl.create({\n                    message: 'Loggeado con éxito',\n                    duration: 3000,\n                    position: 'top'\n                });\n                toast.present();\n            }\n        }, (error) => {\n            console.log(error);\n        });\n    }\n    emailRegister() {\n        const params = new HttpParams({\n            fromObject: this.user\n        });\n        this.httpClient.get(this.api_url+'registro_facebook.php', {params: params}).subscribe((data: any) => {\n            if(data.error) {\n                alert(data.error);\n            }\n        }, (error) => {\n            console.log(error);\n        });\n    }\n\n    ionViewDidLoad() {\n        console.log('ionViewDidLoad LoginPage');\n    }\n    isLoggedIn() {\n        if(JSON.parse(localStorage.getItem('infox_user'))) {\n            this.user = JSON.parse(localStorage.getItem('infox_user')).user;\n        }\n        return (JSON.parse(localStorage.getItem('infox_user')));\n    }\n    logout() {\n        if(confirm('Seguro que desea salir?')) {\n            localStorage.removeItem('infox_user');\n        }\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}