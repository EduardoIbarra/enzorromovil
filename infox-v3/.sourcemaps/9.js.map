{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport {IonicPage, LoadingController, NavController, NavParams, ToastController} from 'ionic-angular';\nimport { Facebook } from '@ionic-native/facebook';\nimport {HttpClient, HttpParams} from \"@angular/common/http\";\nimport {AppService} from \"../../services/services\";\n\n/**\n * Generated class for the LoginPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n    selector: 'page-login',\n    templateUrl: 'login.html',\n})\nexport class LoginPage {\n    fbResponse: any = {};\n    user: any = {};\n    api_url = 'http://infoxsoft.com/app/';\n    operation: string = 'login';\n    countries: any = [];\n    states: any = [];\n    cities: any = [];\n    constructor(public navCtrl: NavController, public navParams: NavParams, private fb: Facebook, public httpClient: HttpClient, private toastCtrl: ToastController, public loadingCtrl: LoadingController, public appService: AppService) {\n        this.appService.getCountries().subscribe((data: any) => {\n            this.countries = JSON.parse(data._body);\n            console.log(this.countries);\n        }, (error) => {\n            console.log(error);\n        });\n        this.user = JSON.parse(localStorage.getItem('infox_user')).user;\n    }\n    countryChanged() {\n        this.appService.getStates(this.user.pais).subscribe((data: any) => {\n            this.states = JSON.parse(data._body);\n            console.log(this.states);\n        }, (error) => {\n            console.log(error);\n        });\n    }\n    stateChanged() {\n        this.appService.getCities(this.user.estado).subscribe((data: any) => {\n            this.cities = JSON.parse(data._body);\n            console.log(this.cities);\n        }, (error) => {\n            console.log(error);\n        });\n    }\n    facebookLogin() {\n        const loader = this.loadingCtrl.create({\n            content: \"Por favor espere...\",\n            duration: 3000\n        });\n        this.fb.login(['public_profile', 'email'])\n            .then((res) => {\n                console.log('Logged into Facebook!', res);\n                this.fbResponse = res;\n                this.fb.api('me?fields=id,name,email,first_name,last_name,picture.width(720).height(720).as(picture_large)', []).then((fbData) => {\n                    const userObject:any = {\n                        nombres: fbData.first_name,\n                        apellidos: fbData.last_name,\n                        email: fbData.email,\n                        user_facebook_id: res.authResponse.userID,\n                        facebook_object: JSON.stringify(res),\n                        facebook_photo: fbData.picture_large.data.url\n                    };\n                    console.log(userObject);\n                    this.registerFromFacebook(userObject).subscribe( (user: any) => {\n                        alert('Ingresado con éxito');\n                        localStorage.setItem('infox_user', JSON.stringify(user));\n                        console.log(user);\n                        this.user = user.user;\n                        loader.dismissAll();\n                    });\n                    loader.dismissAll();\n                });\n            })\n            .catch((e) => {\n                console.log('Error logging into Facebook', e);\n                loader.dismissAll();\n            });\n    }\n    registerFromFacebook(fbOject) {\n        const params = new HttpParams({\n            fromObject: fbOject\n        });\n        return this.httpClient.get(this.api_url+'registro_facebook.php',\n            {params: params});\n    }\n    emailLogin() {\n        const loader = this.loadingCtrl.create({\n            content: \"Por favor espere...\"\n        });\n        loader.present();\n        const params = new HttpParams({\n            fromObject: this.user\n        });\n        this.httpClient.get(this.api_url+'login.php', {params: params}).subscribe((data: any) => {\n            if(data.error) {\n                alert(data.error);\n            }else{\n                this.user.password = null;\n                this.user.password2 = null;\n                localStorage.setItem('infox_user', JSON.stringify(data));\n                let toast = this.toastCtrl.create({\n                    message: 'Loggeado con éxito',\n                    duration: 3000,\n                    position: 'top'\n                });\n                toast.present();\n                loader.dismissAll();\n            }\n        }, (error) => {\n            console.log(error);\n            loader.dismissAll();\n        });\n    }\n    emailRegister() {\n        const loader = this.loadingCtrl.create({\n            content: \"Por favor espere...\"\n        });\n        loader.present();\n        const params = new HttpParams({\n            fromObject: this.user\n        });\n        this.httpClient.get(this.api_url+'registro_facebook.php', {params: params}).subscribe((data: any) => {\n            if(data.error) {\n                alert(data.error);\n                loader.dismissAll();\n                return;\n            }\n            let toast = this.toastCtrl.create({\n                message: 'Registrado con éxito',\n                duration: 3000,\n                position: 'top'\n            });\n            toast.present();\n            this.operation = 'login';\n            loader.dismissAll();\n        }, (error) => {\n            console.log(error);\n            loader.dismissAll();\n        });\n    }\n\n    ionViewDidLoad() {\n        console.log('ionViewDidLoad LoginPage');\n    }\n    isLoggedIn() {\n        return (JSON.parse(localStorage.getItem('infox_user')));\n    }\n    logout() {\n        if(confirm('Seguro que desea salir?')) {\n            localStorage.removeItem('infox_user');\n            this.user.password = null;\n            this.user.password2 = null;\n        }\n    }\n    updateProfile() {\n        const loader = this.loadingCtrl.create({\n            content: \"Por favor espere...\",\n            duration: 3000\n        });\n        loader.present();\n        const params = new HttpParams({\n            fromObject: this.user\n        });\n        this.httpClient.get(this.api_url+'editar_usuario.php', {params: params}).subscribe((data: any) => {\n            if(data.error) {\n                alert(data.error);\n            }\n            let toast = this.toastCtrl.create({\n                message: 'Guardado con éxito',\n                duration: 3000,\n                position: 'top'\n            });\n            toast.present();\n            loader.dismissAll();\n        }, (error) => {\n            console.log(error);\n            loader.dismissAll();\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}